(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c3c2fa8"],{"0ecc":function(e,t,a){"use strict";var n=a("8b5a"),r=a.n(n);r.a},2990:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{background:"#409EFF",color:"#ffffff",padding:"10px"}},[e._v(" 花果园购物中心1-疫情期各入口客流统计 ")]),a("el-row",[a("el-col",[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}}),a("el-button",{staticClass:"ma-5",attrs:{icon:"el-icon-search",circle:"",disabled:e.disabled},on:{click:e.btn}})],1)])],1),a("el-row",[a("el-col",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"element-loading-text":"客流数据加载中...",border:"","show-summary":"","default-sort":{prop:"date",order:"descending"}}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"tbheader",label:"入口"}}),a("el-table-column",{attrs:{prop:"tbdata",label:e.titleLabel,formatter:e.numberFormat,"render-header":e.renderheader}})],1)],1)],1)],1)},r=[],i=(a("84bc"),a("fe59"),a("ecb4"),a("9302"),a("2eeb"),a("1784"),a("983d"),a("e50e"),a("513c"),a("e18c"),a("e35a"),a("1c2e"),a("5e9f"),a("0d7a"),a("08ba"),a("1462")),l=a("a340"),c=a("bb06"),o=a("9691"),s=a("0372"),u=a("e4a1"),p=a("82ae"),d=a.n(p),b=function(e){Object(c["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.loading=!0,e.disabled=!1,e.tableData=[],e.titleLabel=" 客流(人次)/10:00~22:00",e.pickerOptions={disabledDate:function(e){return e.getTime()>=Date.now()},shortcuts:[{text:"上一日",onClick:function(e){new Date;var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",[t,t])}},{text:"今日",onClick:function(e){new Date;var t=new Date;e.$emit("pick",[t,t])}},{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-5184e5),e.$emit("pick",[a,t])}},{text:"最近30日",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}}]},e.value2=[e.formatDate(new Date((new Date).setTime((new Date).getTime()-864e5))),e.formatDate(new Date((new Date).setTime((new Date).getTime()-864e5)))],e}return Object(l["a"])(a,[{key:"renderheader",value:function(e,t){var a=t.column;t.$index;return e("span",{},[e("span",{},a.label.split("/")[0]),e("br"),e("span",{},a.label.split("/")[1])])}},{key:"thousandSeparator",value:function(e){return e&&(-1!=e.toString().indexOf(".")?e.toString().replace(/(\d)(?=(\d{3})+\.)/g,(function(e,t){return t+","})):e.toString().replace(/(\d)(?=(\d{3})+\b)/g,(function(e,t){return t+","})))}},{key:"btn",value:function(){this.getData(this.value2[0].toString(),this.value2[1].toString())}},{key:"mounted",value:function(){console.log(this.value2),this.getData(this.value2[0].toString(),this.value2[1].toString())}},{key:"getData",value:function(e,t){var a=this;this.disabled=!0,this.loading=!0,d.a.get("http://58.42.231.98:5060/api/ptraffic/time",{params:{start:e,end:t}}).then((function(e){if(200==e.status){a.tableData=[];var t,n=e.data[0];for(var r in e.data.forEach((function(e,t){new Date(e.pdate)<new Date("2020-05-16")&&(e.pgatewaypiz=0,e.pkfc=0,e.prest=0),new Date(e.pdate)<new Date("2020-05-24")&&(e.pck=0,e.pqbj=0),e.pall=e.psquare+e.phm+e.pgateway+e.pgatewaypiz+e.pkfc+e.prest+e.pparking+e.pck+e.pqbj})),n){switch(r){case"psquare":t="沿湖广场";break;case"phm":t="H&M";break;case"pgateway":t="人行天桥(乐转旁)";break;case"pgatewaypiz":t="人行天桥(必胜客旁)";break;case"pkfc":t="肯德基";break;case"pqbj":t="一楼黔宝金店旁";break;case"pck":t="CKJeans";break;case"prest":t="食尚汇门厅旁";break;case"pparking":t="停车场";break;default:continue}a.tableData.push({tbheader:t,tbdata:n[r]})}a.loading=!1,a.disabled=!1}}))["catch"]((function(e){console.log(e),a.disabled=!1}))}},{key:"formatDate",value:function(e){var t=e,a=""+(t.getMonth()+1),n=""+t.getDate(),r=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[r,a,n].join("-")}},{key:"getSummaries",value:function(e){var t=e.columns,a=e.data,n=[];t.forEach((function(e,t){if(0!==t){var r=a.map((function(t){return Number(t[e.property])}));return r.every((function(e){return isNaN(e)}))?n[t]="N/A":(n[t]=r.reduce((function(e,t){var a=Number(t);return isNaN(a)?e:e+t}),0),n[t]=n[t].toLocaleString()),console.log(n),n}n[t]="总计"}))}},{key:"numberFormat",value:function(e,t,a){return a.toLocaleString()}}]),a}(u["c"]);b=Object(s["a"])([u["a"]],b);var f=b,g=f,m=(a("0ecc"),a("9ca4")),k=Object(m["a"])(g,n,r,!1,null,null,null);t["default"]=k.exports},"8b5a":function(e,t,a){}}]);
//# sourceMappingURL=chunk-7c3c2fa8.1bfd6778.js.map